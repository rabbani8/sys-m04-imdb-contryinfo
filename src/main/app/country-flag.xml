<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:metadata="http://www.mulesoft.org/schema/mule/metadata" xmlns:dw="http://www.mulesoft.org/schema/mule/ee/dw" xmlns:ws="http://www.mulesoft.org/schema/mule/ws" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:spring="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ws http://www.mulesoft.org/schema/mule/ws/current/mule-ws.xsd
http://www.mulesoft.org/schema/mule/ee/dw http://www.mulesoft.org/schema/mule/ee/dw/current/dw.xsd">
    <sub-flow name="sf-country-flag">
        <dw:transform-message doc:name="DW Transform Country-flag Request">
         	<dw:input-payload mimeType="application/json"/> 
            <dw:set-payload resource="classpath:dwScripts/countryFlag/countryFlagRequest.dwl"/>
        </dw:transform-message>
        <expression-component doc:name="XP SCRIPT Update FV Tracer"><![CDATA[flowVars.tracer.append('| Before Web Service Consumer Web Service Consumer country-flag  __ '+server.dateTime )]]></expression-component>
        <ws:consumer config-ref="Countryinfo_Web_Service_Consumer" doc:name="Web Service Consumer CountryInfo" operation="CountryFlag"/>

         <expression-component doc:name="XP SCRIPT Update FV Tracer"><![CDATA[flowVars.tracer.append('| After Web Service Consumer Web Service Consumer country-flag  __ '+server.dateTime )]]></expression-component>
        <dw:transform-message doc:name="DW Transform Country-flag Response">
        	<dw:input-payload mimeType="application/xml"/> 
            <dw:set-payload resource="classpath:dwScripts/countryFlag/countryFlagResponse.dwl"/>
        </dw:transform-message>
    </sub-flow>
   </mule>
